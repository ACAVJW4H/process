% substrate
\fill[isolationoxide] (0.0,0) rectangle (18.0,\UpperGlass);
\fill[substrate] (0,0) rectangle (18,1.25);
\node at (2,0.5) {Silicon substrate};

\fill[metal1] (1.75,2.0) rectangle (2.25,\LowerMetal);
\fill[metal1] (4.75,2.0) rectangle (5.25,\LowerMetal);
\fill[metal1] (6.0,2.0) rectangle (6.5,\LowerMetal);
\fill[metal1] (7.25,2.0) rectangle (7.75,\LowerMetal);

\fill[metal1] (10.25,2.0) rectangle (10.75,\LowerMetal);
\fill[metal1] (11.5,2.0) rectangle (12.0,\LowerMetal);
\fill[metal1] (12.75,2.0) rectangle (13.25,\LowerMetal);
\fill[metal1] (15.75,2.0) rectangle (16.25,\LowerMetal);

\fill[metal1] (1.5,\LowerMetal) rectangle (5.5,\UpperMetal);
\fill[metal1] (5.75,\LowerMetal) rectangle (6.75,\UpperMetal);
\fill[metal1] (7.0,\LowerMetal) rectangle (11.0,\UpperMetal);
\fill[metal1] (11.25,\LowerMetal) rectangle (12.25,\UpperMetal);
\fill[metal1] (12.5,\LowerMetal) rectangle (16.5,\UpperMetal);

\fill[metal2] (3.00,\UpperMetal) rectangle (4.00,\LowerMoreMetal);
\fill[metal2] (5.75,\UpperMetal) rectangle (6.75,\LowerMoreMetal);
\fill[metal2] (8.50,\UpperMetal) rectangle (9.50,\LowerMoreMetal);
\fill[metal2] (11.25,\UpperMetal) rectangle (12.25,\LowerMoreMetal);
\fill[metal2] (14.00,\UpperMetal) rectangle (15.00,\LowerMoreMetal);

\fill[metal2] (2.75,\LowerMoreMetal) rectangle (4.25,\UpperMoreMetal);
\fill[metal2] (5.50,\LowerMoreMetal) rectangle (7.0,\UpperMoreMetal);
\fill[metal2] (8.25,\LowerMoreMetal) rectangle (9.75,\UpperMoreMetal);
\fill[metal2] (11.00,\LowerMoreMetal) rectangle (12.5,\UpperMoreMetal);
\fill[metal2] (13.75,\LowerMoreMetal) rectangle (15.25,\UpperMoreMetal);

\fill[metal3] (2.75,\UpperMoreMetal) rectangle (4.25,\LowerMoreMetalTwo);
\fill[metal3] (5.50,\UpperMoreMetal) rectangle (7.0,\LowerMoreMetalTwo);
\fill[metal3] (8.25,\UpperMoreMetal) rectangle (9.75,\LowerMoreMetalTwo);
\fill[metal3] (11.00,\UpperMoreMetal) rectangle (12.5,\LowerMoreMetalTwo);
\fill[metal3] (13.75,\UpperMoreMetal) rectangle (15.25,\LowerMoreMetalTwo);

\fill[metal3] ( 2.50,\LowerMoreMetalTwo) rectangle ( 4.50,\UpperMoreMetalTwo);
\fill[metal3] ( 5.25,\LowerMoreMetalTwo) rectangle ( 7.25,\UpperMoreMetalTwo);
\fill[metal3] ( 8.00,\LowerMoreMetalTwo) rectangle (10.00,\UpperMoreMetalTwo);
\fill[metal3] (10.75,\LowerMoreMetalTwo) rectangle (12.75,\UpperMoreMetalTwo);
\fill[metal3] (13.50,\LowerMoreMetalTwo) rectangle (15.50,\UpperMoreMetalTwo);

\fill[white] ( 2.65,\UpperMoreMetalTwo) rectangle ( 4.35,\UpperGlass);
\fill[white] ( 5.35,\UpperMoreMetalTwo) rectangle ( 7.15,\UpperGlass);
\fill[white] ( 8.10,\UpperMoreMetalTwo) rectangle ( 9.90,\UpperGlass);
\fill[white] (10.85,\UpperMoreMetalTwo) rectangle (12.65,\UpperGlass);
\fill[white] (13.60,\UpperMoreMetalTwo) rectangle (15.40,\UpperGlass);

% now comes the active stuff:

% normal wells
\shade[upper left = nwell, upper right = nwell, lower right = substrate, lower left = substrate,] (1.25,\welldepthAsti) rectangle (8.25,2.0);
\shade[upper left = pwell, upper right = pwell, lower right = substrate, lower left = substrate,] (9.75,\welldepthAsti) rectangle (16.75,2.0);

\fill[gateoxide] (5.75,2) rectangle (6.75,2.2);
\fill[poly] (5.75,2.2) rectangle (6.75,3);

\fill[gateoxide] (11.25,2) rectangle (12.25,2.2);
\fill[poly] (11.25,2.2) rectangle (12.25,3);

\shade[upper left = nimplant, upper right = nimplant, lower right = nwell, lower left = nwell,] (1.5,1.8) rectangle (2.5,2);
\shade[upper left = nimplant, upper right = nimplant, lower right = pwell, lower left = pwell,] (10.0,1.8) rectangle (11.25,2);
\shade[upper left = nimplant, upper right = nimplant, lower right = poly, lower left = poly,] (11.25,2.7) rectangle (12.25,3.0);
\shade[upper left = nimplant, upper right = nimplant, lower right = pwell, lower left = pwell,] (12.25,1.8) rectangle (13.5,2);

\shade[upper left = pimplant, upper right = pimplant, lower right = nwell, lower left = nwell,] (4.5,1.8) rectangle (5.75,2);
\shade[upper left = pimplant, upper right = pimplant, lower right = poly, lower left = poly,] (5.75,2.7) rectangle (6.75,3.0);
\shade[upper left = pimplant, upper right = pimplant, lower right = nwell, lower left = nwell,] (6.75,1.8) rectangle (8.0,2);
\shade[upper left = pimplant, upper right = pimplant, lower right = pwell, lower left = pwell,] (15.5,1.8) rectangle (16.5,2);

\fill[silicide] (1.5,1.9) rectangle (2.5,2);
\fill[silicide] (4.5,1.9) rectangle (5.5,2);
\fill[silicide] (5.75,2.9) rectangle (6.75,3.0);
\fill[silicide] (7,1.9) rectangle (8,2);

\fill[silicide] (10.0,1.9) rectangle (11.0,2);
\fill[silicide] (11.25,2.9) rectangle (12.25,3.0);
\fill[silicide] (12.5,1.9) rectangle (13.5,2);
\fill[silicide] (15.5,1.9) rectangle (16.5,2);

\node at (5,-0.5) {\textbf{\large{PMOS}}};
\node at (13,-0.5) {\textbf{\large{NMOS}}};

