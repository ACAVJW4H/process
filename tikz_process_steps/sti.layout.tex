\fill[active,opacity=\OpacityLayout] (0.75,0.5) rectangle (8.75,7.75);
\fill[active,opacity=\OpacityLayout] (11.25,0.5) rectangle (19.25,7.75);

\newcommand{\addLayoutLayer}[2]{
	\node[fill=#1, opacity=\OpacityLayout, minimum size=5mm,below of=#2] (#1) {};
	\node[right of=#1] {#1};
}

\node (header) at (23,10) {\textbf{Layers}}; % 
\addLayoutLayer{nimplant}{header}
\addLayoutLayer{pimplant}{nimplant}
\addLayoutLayer{gatemetal}{pimplant}
\addLayoutLayer{metal1}{gatemetal}
\addLayoutLayer{via1}{metal1}
\addLayoutLayer{metal2}{via1}
\addLayoutLayer{via2}{metal2}
\addLayoutLayer{active}{via2}
\addLayoutLayer{nwell}{active}

\draw[dotted] (21.5,0) rectangle (25.5,11);