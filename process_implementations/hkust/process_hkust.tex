\documentclass[a4paper,landscape]{article}
\def\micro{\mu m}
\def\um{$\micro$ }
\def\degreesC{$\degree$C }
\def\percent{$\%$ }

\usepackage{geometry}
	\geometry{a4paper,
	total={170mm,257mm},
	left=20mm,
	top=20mm,
	right=20mm,
	bottom=20mm,
}

\input{global_color_scheme.tex}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{forloop}
\usepackage{array}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{gensymb}
\usepackage{mdframed}
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{arrows,automata,shapes}
\usepackage[siunitx]{circuitikz}
\usepackage{makecell}
\usepackage{array}

\def\WaferClean{\begin{tikzpicture}\node [fill=cyan, rounded corners=5pt] {Clean};\end{tikzpicture}}
\def\WaferSemiClean{\begin{tikzpicture}\node [fill=green, rounded corners=5pt] {Semi clean};\end{tikzpicture}}
\def\WaferNonStandard{\begin{tikzpicture}\node [fill=yellow, rounded corners=5pt] {Non standard};\end{tikzpicture}}

\usepackage[colorlinks=true,linkcolor=blue,urlcolor=black,bookmarksopen=true]{hyperref}
\usepackage{bookmark}
\usepackage{hyperref}
\usepackage{sepfootnotes}
\usepackage{lipsum,tocloft} 
\usetikzlibrary{positioning}
\usetikzlibrary{patterns}

\usepackage{float}
\floatstyle{boxed} 
\restylefloat{figure}

\newcounter{TopProcessStep}
\newcounter{SubProcessStep}
\setcounter{TopProcessStep}{0}
\setcounter{SubProcessStep}{1}

\def\LastCleaniness{foo}

\newcommand{\getWaferCleaninessSymbol}[1]{
	\ifthenelse{\equal{#1}{clean}} {\WaferClean} {
		\ifthenelse{\equal{#1}{semi-clean}} {\WaferSemiClean} {
			\ifthenelse{\equal{#1}{clean/semi-clean}} {\WaferClean/ \WaferSemiClean} {
				\ifthenelse{\equal{#1}{non-standard}} {\WaferClean/ \WaferSemiClean} {
					\WaferNonStandard
				}
			}
		}
	}
}

\newcommand{\makeProcessTable}[2]{
	\begin{tikzpicture}[node distance = 3cm, auto, thick,scale=0.3, every node/.style={transform shape}]
		\input{#1}
	\end{tikzpicture}
	\tiny\begin{tabular}{
		|>{\centering}p{1cm}
		|>{\centering}p{3cm}
		|>{\centering}p{1cm}
		|>{\centering}p{1.5cm}
		|>{\centering}p{3cm}
		|>{\centering}p{4cm}
		|>{\centering\arraybackslash\hspace{20pt}}p{1.5cm}|}
	\hline
	\textbf{Step Number} &
	\textbf{Equipment} &
	\textbf{Location} &
	\textbf{Cleanliness} &
	\textbf{Process} &
	\textbf{Requirements} &
	\textbf{Wafer Cleanliness}
	\setcounter{SubProcessStep}{1}
	\addtocounter{TopProcessStep}{1} \\
	\hline
	#2
	\end{tabular}
}

\newcommand{\addProcessStep}[6]{
\arabic{TopProcessStep}.\arabic{SubProcessStep}
\addtocounter{SubProcessStep}{1}
&
#1 &
#2 &
\getWaferCleaninessSymbol{#5} &
#3 &
#4 &
\getWaferCleaninessSymbol{#6} \\
\hline
}

\author{David Lanzendörfer}
\title{LibreSilicon process HKUST (NFF)}
\begin{document}
\maketitle

\begin{abstract}
	\input{process_abstract.tex}
\end{abstract}
\vfill
\newpage

Process Flow of Lanceville Technologies LibreSilicon 180nm

\begin{itemize}
	\item Project: LibreSilicon 1\um
	\item Name: Lanceville Technologies Group
	\item Substrate: P-Substrate silicon wafer <100>
	\item Date: \today
\end{itemize}

\section{Shallow trench isolation}
\makeProcessTable{tikz_process_steps/sti.a.tex}{
\addProcessStep{A3: Sulfuric Cleaning}{P201000}{Initial Cleaning}{H2SO4 + H2O2, 10mins @ 120\degreesC}{clean}{clean}
\addProcessStep{A2: HF:H2O (1:50)}{P201000}{HF dip}{1 min}{clean}{clean}
\addProcessStep{Spin Dryer-A}{P201000}{Dry the wafer automatically}{ }{clean}{clean}
\addProcessStep{Diff. Furnace-D2 Dry/Wet Oxidation}{P201000}{Hard mask dioxide growth}{100nm, 5 minutes 30 seconds @ 1050\degreesC}{clean}{clean}
\addProcessStep{B1: Sulfuric Cleaning}{P201000}{Standard Cleaning}{H2SO4 + H2O2, 10mins @ 120\degreesC}{clean}{clean}
\addProcessStep{Spin Dryer-B}{P201000}{Dry the wafer automatically}{ }{clean}{clean}
\addProcessStep{SVG Coater Track}{P200100}{HMDS, PR coating, soft bake}{AZ 504, 1.2µm, soft bake: 110C 1min}{clean/semi-clean}{clean}
\addProcessStep{ASML Stepper}{P200100}{Exposure of the "active" layer}{??}{clean/semi-clean}{clean}
\addProcessStep{SVG Developer Track}{P200100}{Develop, Hard bake}{FHD-5, 1min; hard bake: 120C, 1min}{clean/semi-clean}{clean}
\addProcessStep{C3: BOE}{P201000}{Oxide Etch}{3 minutes 10 seconds}{clean}{clean}
\addProcessStep{E4: Resist Strip}{P201000}{Sulfuric resist strip}{H2SO4 + H2O2,120C, 10mins}{clean/semi-clean}{clean}
\addProcessStep{Spin Dryer-E}{P201000}{Spin dry}{}{clean/semi-clean}{clean}
\addProcessStep{DRIE Etcher \#1 (DRY-Si-1)(We can't use KOH because of contamination control rules)}{P201000}{Etching the trenches}{1 minute (2\um)}{clean/semi-clean}{clean}
\addProcessStep{C3: BOE}{P201000}{Hard mask removal}{1 minute 10 seconds}{clean}{clean}
\addProcessStep{Spin Dryer-E}{P201000}{Spin dry}{}{clean/semi-clean}{clean}
}

\section{P-well}
\makeProcessTable{tikz_process_steps/pwell.a.tex}{
\addProcessStep{A3: Sulfuric Cleaning}{P201000}{Default Cleaning}{H2SO4 + H2O2, 10mins @ 120\degreesC}{clean}{clean}
\addProcessStep{Spin Dryer-A}{P201000}{Dry the wafer automatically}{ }{clean}{clean}
\addProcessStep{Diff. Furnace-D2 Dry/Wet Oxidation}{P201000}{Hard mask dioxide growth}{500nm, 56 minutes @ 1050\degreesC}{clean}{clean}
\addProcessStep{B1: Sulfuric Cleaning}{P201000}{Standard Cleaning}{H2SO4 + H2O2, 10mins @ 120\degreesC}{clean}{clean}
\addProcessStep{Spin Dryer-B}{P201000}{Dry the wafer automatically}{ }{clean}{clean}
\addProcessStep{SVG Coater Track}{P200100}{HMDS, PR coating, soft bake}{AZ 504, 1.2µm, soft bake: 110C 1min}{clean/semi-clean}{clean}
\addProcessStep{ASML Stepper}{P200100}{Exposure of the "nwell" layer}{??}{clean/semi-clean}{clean}
\addProcessStep{SVG Developer Track}{P200100}{Develop, Hard bake}{FHD-5, 1min; hard bake: 120C, 1min}{clean/semi-clean}{clean}
\addProcessStep{C3: BOE}{P201000}{Oxide Etch}{4 minutes 10 seconds (500nm)}{clean}{clean}
\addProcessStep{E4: Resist Strip}{P201000}{Sulfuric resist strip}{H2SO4 + H2O2,120C, 10mins}{clean/semi-clean}{clean}
\addProcessStep{IMP: CF--3000}{P201000}{Boron implant}{$2.5 \times 10^{12}cm^{-2}$@100keV}{clean/semi-clean}{clean}
\addProcessStep{C3: BOE}{P201000}{Hard mask removal}{4 minutes 10 seconds (500nm)}{clean}{clean}
}

\section{N-well}
\makeProcessTable{tikz_process_steps/nwell.a.tex}{
\addProcessStep{A3: Sulfuric Cleaning}{P201000}{Default Cleaning}{H2SO4 + H2O2, 10mins @ 120\degreesC}{clean}{clean}
\addProcessStep{Spin Dryer-A}{P201000}{Dry the wafer automatically}{ }{clean}{clean}
\addProcessStep{Diff. Furnace-D2 Dry/Wet Oxidation}{P201000}{Hard mask dioxide growth}{500nm, 56 minutes @ 1050\degreesC}{clean}{clean}
\addProcessStep{B1: Sulfuric Cleaning}{P201000}{Standard Cleaning}{H2SO4 + H2O2, 10mins @ 120\degreesC}{clean}{clean}
\addProcessStep{Spin Dryer-B}{P201000}{Dry the wafer automatically}{ }{clean}{clean}
\addProcessStep{SVG Coater Track}{P200100}{HMDS, PR coating, soft bake}{AZ 504, 1.2µm, soft bake: 110C 1min}{clean/semi-clean}{clean}
\addProcessStep{ASML Stepper}{P200100}{Exposure of the "pwell" layer}{??}{clean/semi-clean}{clean}
\addProcessStep{SVG Developer Track}{P200100}{Develop, Hard bake}{FHD-5, 1min; hard bake: 120C, 1min}{clean/semi-clean}{clean}
\addProcessStep{C3: BOE}{P201000}{Oxide Etch}{4 minutes 10 seconds (500nm)}{clean}{clean}
\addProcessStep{E4: Resist Strip}{P201000}{Sulfuric resist strip}{H2SO4 + H2O2,120C, 10mins}{clean/semi-clean}{clean}
\addProcessStep{IMP: CF--3000}{P201000}{Phosphorus implant}{$2.5 \times 10^{12}cm^{-2}$@100keV}{clean/semi-clean}{clean}
\addProcessStep{C3: BOE}{P201000}{Hard mask removal}{4 minutes 10 seconds (500nm)}{clean}{clean}
}

%%%%%%%%%%%%% END OF DOCUMENT
\end{document}